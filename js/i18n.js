// i18n Configuration for Jet Wave
const i18n = {
  // Current language
  currentLang: "en",

  // Available languages
  languages: {
    en: "English",
    hr: "Hrvatski",
  },

  // Translations
  translations: {
    en: {
      // Navigation
      nav: {
        about: "About",
        team: "Team",
        models: "Models",
        prices: "Prices",
        location: "Location",
        contact: "Contact",
      },

      // Hero Section
      hero: {
        title: "Jet Wave",
        subtitle: "Jet Ski Rental in Korčula",
        cta: "Contact Us",
      },

      // About Section
      about: {
        title: "About Jet Wave",
        description:
          "Jet Wave is an adventure center for jet ski rental in Korčula, with locations in La Banya and Put Sv. Nikole 38. Our offer includes top-quality Sea-Doo jet ski models and a speedboat, ready for your sea adventure. With professional service and the beautiful nature of Korčula, Jet Wave guarantees an unforgettable experience.",
      },

      // Models Section
      models: {
        title: "Our Models",
        seaDooRXTX300: "Sea Doo RXT-X RS 300",
        seaDooGTI130: "Sea Doo GTI 130",
        speedboat: "Speedboat",
        year: "2023",
        blackYellow: "Black & Yellow",
        black: "Black",
        white: "White",
        comingSoon: "Coming Soon",
        specs: {
          rxtx300: "1630cc, 300 HP",
          gti130: "130 HP",
        },
      },

      // Prices Section
      prices: {
        title: "Prices & Information",
        thirtyMin: "30 minutes",
        oneHour: "1 hour",
        custom: "Custom",
        onRequest: "On request",
        mostPopular: "Most Popular",
        insurance: "All jet skis are fully insured.",
      },

      // Location Section
      location: {
        title: "Location & Hours",
        laBanya: "La Banya",
        putSvNikole: "Put Sv. Nikole 38",
        korcula: "Korčula, Croatia",
        workingHours: "Working Hours",
        hours: "08:00 - 20:00",
      },

      // Contact Section
      contact: {
        title: "Contact Us",
        name: "Your name",
        email: "Your email",
        message: "Your message",
        date: "Date",
        time: "Time",
        sendMessage: "Send Message",
        phone: "Phone",
        whatsapp: "WhatsApp",
        sms: "SMS",
        clickToCall: "Click to call",
      },

      // Team Section
      team: {
        title: "Our Team",
        filip: {
          title: "The Captain of Adrenaline",
          bio: "When you sit on one of our jet skis, you’ll feel both the thrill and the safety of having someone by your side who truly lives the sea. Filip – or Fila, as everyone calls him – graduated in kinesiology and has been dominating the water polo arena for KPK for years. His passion for sport and the ocean flows directly into Jet Wave, where he gives every rider clear instructions and the confidence to get the most out of their ride. And when he’s not chasing waves, you’ll find him aiming for bullseyes at the dartboard – always with that same winning spirit.",
        },
        gabrijel: {
          title: "The Master of the Waves",
          bio: "For Gabrijel, the sea is not just a hobby – it’s a calling. A student at VERN University in Zagreb, a licensed skipper, and a seasoned guide, Gabrijel knows every cove, every hidden beach, and every sea tale of Korčula. He has led everything from intimate private tours to high-adrenaline adventures. With years of experience navigating speedboats and yachts, you’ll be in expert hands as he shows you the coast from a perspective you’ve always dreamed of.",
        },
        cta: "Ride with the pros",
        why: {
          title: "Why choose us?",
          copy: "Because with Jet Wave, you’re not just renting a jet ski – you’re booking an experience. Passion, safety, and pure adventure, all in a single unforgettable day.",
        },
      },

      // Footer
      footer: {
        tagline: "Jet Ski Rental in Korčula",
        rights: "All rights reserved.",
      },

      // Form validation
      validation: {
        required: "Please fill in all fields.",
        invalidEmail: "Please enter a valid email address.",
        sending: "Sending message...",
        success: "Message sent successfully! We will contact you soon.",
        error: "Error sending message. Please try again.",
      },
    },

    hr: {
      // Navigation
      nav: {
        about: "O nama",
        team: "Tim",
        models: "Modeli",
        prices: "Cijene",
        location: "Lokacija",
        contact: "Kontakt",
      },

      // Hero Section
      hero: {
        title: "Jet Wave",
        subtitle: "Najam jet skija u Korčuli",
        cta: "Kontaktirajte nas",
      },

      // About Section
      about: {
        title: "O Jet Wave",
        description:
          "Jet Wave je avanturistički centar za najam jet skija u Korčuli, s lokacijama u La Banya i Put Sv. Nikole 38. Naša ponuda uključuje vrhunske Sea-Doo modele jet skija i gliser, spremne za tvoju morsku avanturu. Uz profesionalnu uslugu i predivnu prirodu Korčule, Jet Wave garantira doživljaj koji se pamti.",
      },

      // Models Section
      models: {
        title: "Naši Modeli",
        seaDooRXTX300: "Sea Doo RXT-X RS 300",
        seaDooGTI130: "Sea Doo GTI 130",
        speedboat: "Gliser",
        year: "2023",
        blackYellow: "Crna & Žuta",
        black: "Crna",
        white: "Bijela",
        comingSoon: "Dolazi uskoro",
        specs: {
          rxtx300: "1630cc, 300 KS",
          gti130: "130 KS",
        },
      },

      // Prices Section
      prices: {
        title: "Cijene i Informacije",
        thirtyMin: "30 minuta",
        oneHour: "1 sat",
        custom: "Prilagođeno",
        onRequest: "Na upit",
        mostPopular: "Najpopularnije",
        insurance: "Svi jet skiji su potpuno osigurani.",
      },

      // Location Section
      location: {
        title: "Lokacija i Radno Vrijeme",
        laBanya: "La Banya",
        putSvNikole: "Put Sv. Nikole 38",
        korcula: "Korčula, Hrvatska",
        workingHours: "Radno Vrijeme",
        hours: "08:00 - 20:00",
      },

      // Contact Section
      contact: {
        title: "Kontaktirajte Nas",
        name: "Vaše ime",
        email: "Vaš email",
        message: "Vaša poruka",
        date: "Datum",
        time: "Vrijeme",
        sendMessage: "Pošaljite poruku",
        phone: "Telefon",
        whatsapp: "WhatsApp",
        sms: "SMS",
        clickToCall: "Kliknite za direktan poziv",
      },

      // Team Section
      team: {
        title: "Naš Tim",
        filip: {
          title: "Kapetan adrenalina",
          bio: "Kad sjedneš na jedan od naših jet skija, osjetit ćeš i uzbuđenje i sigurnost uz nekoga tko uistinu živi more. Filip – ili Fila, kako ga svi zovu – diplomirao je kineziologiju i godinama dominira vaterpolskim bazenima kao igrač KPK-a. Njegova strast prema sportu i moru prelijeva se izravno u Jet Wave, gdje svakom vozaču daje jasne upute i samopouzdanje da izvuče maksimum iz vožnje. A kad ne juri valove, pronaći ćeš ga kako gađa “bul” na pikadu – uvijek s istim pobjedničkim stavom.",
        },
        gabrijel: {
          title: "Gospodar valova",
          bio: "Za Gabrijela more nije samo hobi – to je poziv. Student VERN-a u Zagrebu, licencirani skiper i iskusni vodič, Gabrijel poznaje svaku uvalu, svaku skrivenu plažu i svaku morsku priču Korčule. Vodio je sve – od intimnih privatnih tura do adrenalinskih avantura. S godinama iskustva u upravljanju gliserima i jahtama, bit ćeš u sigurnim rukama dok ti pokazuje obalu iz perspektive o kojoj si oduvijek sanjao.",
        },
        cta: "Zajaši val s profesionalcima",
        why: {
          title: "Zašto baš mi?",
          copy: "Jer s Jet Waveom ne iznajmljuješ samo jet ski – rezerviraš doživljaj. Strast, sigurnost i čista avantura, u jednom nezaboravnom danu.",
        },
      },

      // Footer
      footer: {
        tagline: "Najam jet skija u Korčuli",
        rights: "Sva prava pridržana.",
      },

      // Form validation
      validation: {
        required: "Molimo popunite sva polja.",
        invalidEmail: "Molimo unesite ispravnu email adresu.",
        sending: "Poruka se šalje...",
        success: "Poruka je uspješno poslana! Kontaktirat ćemo vas uskoro.",
        error: "Greška pri slanju poruke. Molimo pokušajte ponovo.",
      },
    },
  },

  // Initialize i18n
  init() {
    // Check for saved language preference
    const savedLang = localStorage.getItem("jetwave-lang");
    if (savedLang && this.languages[savedLang]) {
      this.currentLang = savedLang;
    } else {
      // Detect browser language
      const browserLang = navigator.language.split("-")[0];
      if (this.languages[browserLang]) {
        this.currentLang = browserLang;
      }
    }

    this.updateContent();
    this.setupLanguageSwitcher();
  },

  // Change language
  changeLanguage(lang) {
    if (this.languages[lang]) {
      this.currentLang = lang;
      localStorage.setItem("jetwave-lang", lang);
      this.updateContent();
      this.updateLanguageSwitcher();
    }
  },

  // Get translation
  t(key) {
    const keys = key.split(".");
    let value = this.translations[this.currentLang];

    for (const k of keys) {
      if (value && value[k]) {
        value = value[k];
      } else {
        // Fallback to English
        value = this.translations.en;
        for (const fallbackKey of keys) {
          if (value && value[fallbackKey]) {
            value = value[fallbackKey];
          } else {
            return key; // Return key if translation not found
          }
        }
        break;
      }
    }

    return value || key;
  },

  // Update all content on the page
  updateContent() {
    // Navigation
    document.querySelectorAll("[data-i18n]").forEach((element) => {
      const key = element.getAttribute("data-i18n");
      const translation = this.t(key);

      if (element.tagName === "INPUT" || element.tagName === "TEXTAREA") {
        element.placeholder = translation;
      } else {
        element.textContent = translation;
      }
    });

    // Update page title
    document.title = `Jet Wave - ${this.t("hero.subtitle")}`;

    // Update meta description
    const metaDescription = document.querySelector('meta[name="description"]');
    if (metaDescription) {
      metaDescription.content = this.t("about.description");
    }
  },

  // Setup language switcher
  setupLanguageSwitcher() {
    const languageSwitcher = document.querySelector(".language-switcher");
    if (languageSwitcher) {
      this.updateLanguageSwitcher();
    }
  },

  // Update language switcher display
  updateLanguageSwitcher() {
    const languageSwitcher = document.querySelector(".language-switcher");
    if (!languageSwitcher) return;

    // If inline switcher (EN | HR), don't overwrite markup
    if (languageSwitcher.classList.contains("inline")) {
      const current = this.currentLang;
      // Toggle active class on inline buttons if present
      const links = languageSwitcher.querySelectorAll(".lang-link");
      links.forEach((btn) => {
        const lang = btn.getAttribute("data-lang");
        if (lang) btn.classList.toggle("active", lang === current);
      });
      return;
    }

    // Default: render dropdown-based switcher
    const currentLangText = this.languages[this.currentLang];
    languageSwitcher.innerHTML = `
      <button class="lang-btn active" data-lang="${this.currentLang}">
        ${currentLangText}
      </button>
      <div class="lang-dropdown">
        ${Object.entries(this.languages)
          .filter(([code]) => code !== this.currentLang)
          .map(
            ([code, name]) => `
            <button class="lang-btn" data-lang="${code}">
              ${name}
            </button>
          `
          )
          .join("")}
      </div>
    `;

    // Add event listeners
    languageSwitcher.querySelectorAll(".lang-btn").forEach((btn) => {
      btn.addEventListener("click", (e) => {
        e.stopPropagation();
        const lang = btn.getAttribute("data-lang");
        if (lang && lang !== this.currentLang) {
          this.changeLanguage(lang);
        }
      });
    });
  },
};

// Export for use in other files
if (typeof module !== "undefined" && module.exports) {
  module.exports = i18n;
} else {
  window.i18n = i18n;
}
